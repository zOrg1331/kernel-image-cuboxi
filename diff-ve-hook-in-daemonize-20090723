--- ./kernel/exit.c.daemon	2009-07-23 19:07:52.000000000 +0400
+++ ./kernel/exit.c	2009-07-23 19:08:46.000000000 +0400
@@ -416,6 +416,8 @@ void daemonize(const char *name, ...)
 	struct fs_struct *fs;
 	sigset_t blocked;
 
+	(void)virtinfo_gencall(VIRTINFO_DOEXIT, NULL);
+
 	va_start(args, name);
 	vsnprintf(current->comm, sizeof(current->comm), name, args);
 	va_end(args);
