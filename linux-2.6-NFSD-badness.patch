 
--- linux-2.6.14/fs/lockd/svc.c~	2005-11-22 10:37:03.000000000 -0500
+++ linux-2.6.14/fs/lockd/svc.c	2005-11-22 10:37:38.000000000 -0500
@@ -305,7 +305,7 @@ lockd_down(void)
 	 * the lockd semaphore, we can't wait around forever ...
 	 */
 	clear_thread_flag(TIF_SIGPENDING);
-	interruptible_sleep_on_timeout(&lockd_exit, HZ);
+	wait_event_timeout(lockd_exit, nlmsvc_pid == 0, HZ);
 	if (nlmsvc_pid) {
 		printk(KERN_WARNING 
 			"lockd_down: lockd failed to exit, clearing pid\n");
