From: Rob Evers <revers@redhat.com>
Date: Thu, 28 May 2009 11:50:48 -0400
Subject: [scsi] mvsas: sync w/ appropriate upstream changes
Message-id: 20090528154711.16475.18752.sendpatchset@localhost.localdomain
O-Subject: [RHEL5.4 PATCH 4/5 V5] Sync w/ appropriate upstream changes
Bugzilla: 485126

https://bugzilla.redhat.com/show_bug.cgi?id=485126

diff --git a/drivers/scsi/mvsas.c b/drivers/scsi/mvsas.c
index c16dd24..204d501 100644
--- a/drivers/scsi/mvsas.c
+++ b/drivers/scsi/mvsas.c
@@ -650,7 +650,7 @@ struct mvs_info {
 
 	const struct mvs_chip_info *chip;
 
-	u32			tags[MVS_SLOTS/32];
+	DECLARE_BITMAP(tags, MVS_SLOTS);
 	struct mvs_slot_info	slot_info[MVS_SLOTS];
 				/* further per-slot information */
 	struct mvs_phy		phy[MVS_MAX_PHYS];
@@ -763,7 +763,7 @@ static int mvs_find_tag(struct mvs_info *mvi, struct sas_task *task, u32 *tag)
 {
 	if (task->lldd_task) {
 		struct mvs_slot_info *slot;
-		slot = (struct mvs_slot_info *) task->lldd_task;
+		slot = task->lldd_task;
 		*tag = slot - mvi->slot_info;
 		return 1;
 	}
@@ -1800,7 +1800,7 @@ static int mvs_task_exec(struct sas_task *task, int num, unsigned long gfp_flags
 
 		slot->task = t;
 		slot->port = tei.port;
-		t->lldd_task = (void *) slot;
+		t->lldd_task = slot;
 		list_add_tail(&slot->list, &slot->port->list);
 		/* TODO: select normal or high priority */
 
